<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
  <meta charset="utf-8">
  <title></title>
  <link rel="stylesheet" href="style.css">
</head>
<body>




  <section class="tabs">
    <div class="container">
      <div id="tab-1" class="tab-item tab-border">
        <i class="fas fa-door-open fa-3x"></i>
        <p class="hide-sm">HOME</p>
      </div>
      <div id="tab-2" class="tab-item">
        <i class="fas fa-tablet-alt fa-3x"></i>
        <p class="hide-sm">Buscador</p>
      </div>
      <div id="tab-3" class="tab-item">
        <i class="fas fa-tags fa-3x"></i>
        <p class="hide-sm">Estrenos</p>
      </div>
    </div>
  </section>

  <section class="tab-content">
    <div class="container">
      <!-- Tab Content 1 -->
      <div id="tab-1-content" class="tab-content-item show">
        <div class="tab-1-content-inner">
          <div>
            <p class="text-lg">
              MI MOVIE APP
            </p>
            <a id="test" href="#" class="btn btn-lg tab-item">PROBAR</a>
          </div>
          <img src="https://i.ibb.co/J2xDJV7/tab-content-1.png" alt="" />
        </div>
      </div>





      <!-- Tab Content 2 -->
      <div id="tab-2-content" class="tab-content-item">
        <div class="tab-2-content-top">
          <p class="text-lg">
            Busca los Ãºltimos trailers por genero!
          </p>

          <div class="">
            <label class="field a-field a-field_a1">
                <input autocomplete="off" id="query" type="search" name="genre" class="field__input a-field__input" placeholder="drama, terror,," required>
                <span class="a-field__label-wrap">
                  <span class="a-field__label">Bucar Trailer</span>
                </span>
              </label>

            <a href="#" class="btn btn-lg" onclick="buscarPelicula()">Buscar</a>
          </div>
        </div>
        <div class="">
          <div id="trailers">
            <!-- <div class="movie">
              Titulo : <span id="title"></span><br>
              Fecha de estreno : <span id="release_Date"></span><br>
            </div> -->
          </div>
        </div>
      </div>





      <!-- Tab Content 3 -->
      <div id="tab-3-content" class="tab-content-item">
        <div class="text-center">
          <p class="text-lg">
            Choose
          </p>
          <a href="#" class="btn btn-lg">Watch</a>
        </div>


      </div>
    </div>
  </section>



<script type="text/javascript" src ="app.js"></script>
<script type="text/javascript">

var trailers = document.getElementById('trailers');



function buscarPelicula() {
  var query = document.getElementById('query');
  fetch('https://ayguid.github.io/miniProyectsDH/nivel%203%20js/ideas%20proyectos/trailers.json')
  .then(response => {
    return response.json();
  })
  .then(data => {
    // Los datos los trabajamos en este area
    console.log(data);
    // var pedido = filterByTitle(data, query.value);
    var pedido = filterByGenre(data, query.value);
    buildDivs(pedido);
  })
  .catch(err => {
    // Los errores los trabajamos en este area
    console.log(err);
  });
}



function buildDivs(resultado) {
  console.log(resultado);
  trailers.innerHTML='';
  for (var i = 0; i < resultado.length; i++) {
    var div=document.createElement('div');
    var iframe=document.createElement('iframe');
    iframe.setAttribute("src", resultado[i].url);
    iframe.style.width = "100%";
    iframe.style.height = "480px";
    div.appendChild(iframe);
    div.classList.add('trailer');
    trailers.appendChild(div);
  }
}




function filterByGenre(dataResponse, genre) {
  // var result = dataResponse.filter(d => d.Title == title);    //mas facil, pero no saben ES6.
  var result = dataResponse.filter(function(d){
    return d.genre.toLowerCase() == genre.toLowerCase();
  });
  return result;
}


function filterByTitle(dataResponse, title) {
  // var result = dataResponse.filter(d => d.Title == title);    //mas facil, pero no saben ES6.
  var result = dataResponse.filter(function(d){
    return d.title.toLowerCase() == title.toLowerCase();
  });
  return result;
}


</script>
</body>
</html>
